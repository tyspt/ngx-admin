<nb-card class="form-card" [nbSpinner]="loading">
  <nb-card-header class="d-flex justify-content-between align-items-center">
    Add New Package
    <button nbButton matRipple ghost size="small" (click)="dismiss()">
      <nb-icon class="close-dialog-icon" icon="close"></nb-icon>
    </button>
  </nb-card-header>
  <nb-card-body>
    <form #packageForm="ngForm">
      <div class="form-group row">
        <label for="recipient" class="label col-sm-3 offset-1 col-form-label">Package Type:</label>
        <div class="col-sm-5">
          <nb-select matRipple [(ngModel)]="package.type" name="type">
            <nb-option matRipple value="INBOUND">Inbound</nb-option>
            <nb-option matRipple value="OUTBOUND">Outbound</nb-option>
          </nb-select>
        </div>
      </div>
      <div class="form-group row">
        <label for="trackingNumber" class="label col-sm-3 offset-1 col-form-label">Tracking Number:</label>
        <div class="col-sm">
          <input type="text" nbInput fullWidth id="trackingNumber" [(ngModel)]="package.barcode" name="barcode">
        </div>
      </div>
      <div class="form-group row">
        <label for="orderNumber" class="label col-sm-3 offset-1 col-form-label">Order Number:</label>
        <div class="col-sm">
          <input type="text" nbInput fullWidth id="orderNumber" #orderNumber [(ngModel)]="package.orderNumber"
            name="orderNumber" [nbAutocomplete]="orderNumberAuto" (input)="onChange()">
          <nb-autocomplete #orderNumberAuto (selectedChange)="onSelectionChange($event)">
            <nb-option *ngFor="let option of filteredorderNumberOptions$ | async" [value]="option">
              {{ option }}
            </nb-option>
          </nb-autocomplete>
        </div>
      </div>
      <div class="form-group row">
        <label for="sender" class="label col-sm-3 offset-1 col-form-label">Sender:</label>
        <div class="col-sm">
          <input type="text" nbInput fullWidth id="sender" [(ngModel)]="package.sender.name" name="senderName">
        </div>
      </div>
      <div class="form-group row">
        <label for="recipient" class="label col-sm-3 offset-1 col-form-label">Recipient Name*:</label>
        <div class="col-sm">
          <input type="text" nbInput required fullWidth id="recipient" [(ngModel)]="package.recipient.name"
            name="recipientName">
        </div>
      </div>
      <div class="form-group row">
        <label for="email" class="label col-sm-3 offset-1 col-form-label">Email:</label>
        <div class="col-sm">
          <input type="text" nbInput fullWidth id="email" [(ngModel)]="package.recipient.email" name="recipientEmail">
        </div>
      </div>
      <div class="form-group row">
        <label for="telephone" class="label col-sm-3 offset-1 col-form-label">Telephone:</label>
        <div class="col-sm">
          <input type="text" nbInput fullWidth id="telephone" [(ngModel)]="package.recipient.telephone"
            name="recipientTelephone">
        </div>
      </div>
      <div class="form-group row">
        <label for="recipient" class="label col-sm-3 offset-1 col-form-label">Building:</label>
        <div class="col-sm">
          <nb-select matRipple [(ngModel)]="package.recipient.building.id" name="recipientBuilding">
            <nb-option matRipple value="1">A12</nb-option>
            <nb-option matRipple value="2">A42</nb-option>
            <nb-option matRipple value="3">B24</nb-option>
            <nb-option matRipple value="4">B33</nb-option>
            <nb-option matRipple value="5">D47</nb-option>
            <nb-option matRipple value="6">F18</nb-option>
            <nb-option matRipple value="7">K27</nb-option>
            <nb-option matRipple value="8">K210</nb-option>
          </nb-select>
        </div>
      </div>
      <div class="form-group row">
        <label for="fullAddress" class="label col-sm-3 offset-1 col-form-label">Address:</label>
        <div class="col-sm">
          <input type="text" nbInput fullWidth id="fullAddress" [(ngModel)]="package.recipient.fullAddress"
            name="recipientAddress">
        </div>
      </div>
      <div class="form-group row">
        <label for="representative" class="label col-sm-3 offset-1 col-form-label">Representative:</label>
        <div class="col-sm">
          <input type="text" nbInput fullWidth id="representative" [(ngModel)]="package.representative.name"
            name="representativeName">
        </div>
      </div>
      <div class="form-group">
        <div class="action-buttons d-flex justify-content-end">
          <button nbButton status="primary" type="submit" (click)="createPackage(); packageForm.reset()"
            [disabled]="packageForm.invalid">Create</button>
          <button nbButton status="secondary" (click)="dismiss()">Cancel</button>
        </div>
      </div>
    </form>
  </nb-card-body>
</nb-card>
